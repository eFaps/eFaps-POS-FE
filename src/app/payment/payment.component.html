<div [ngBusy]="{busy: busy, message: 'WAIT' | translate}"></div>
<div fxLayout="row" fxLayoutGap="20px">
  <div fxLayout="column" fxFlex="50">
    <app-contact *ngIf="showContact" (contactSelected)="selectContact($event)"></app-contact>
    <div fxLayout="row">
      <mat-radio-group class="docType-radio-group" [(ngModel)]="docType" fxFlex>
        <mat-radio-button class="docType-radio-button" *ngFor="let type of docTypes; let idx = index" [value]="DocumentType[type]" (click)="setDocType(DocumentType[type])">
          {{type | translate}}
        </mat-radio-button>
      </mat-radio-group>
      <mat-button-toggle [value]="showContact" (change)="toggleContact()" [disabled]="!permitToggleContact">{{ showContact ? 'Desc.' : 'Cliente'}}</mat-button-toggle>
      <div class="balance" fxFlex="250px">
        <span *ngIf="balance">{{ 'BALANCE.LABEL' | translate }} - {{ balance?.number }}</span>
      </div>
    </div>
    <app-document></app-document>
    <button mat-fab color="primary" (click)="showDiscount()" class="discount">Desc.</button>
  </div>
  <div fxFlex class="paymentsContainer">
    <div class="paymentsTypes">
      <app-payment-type></app-payment-type>
    </div>
    <mat-divider></mat-divider>
    <div class="paymentsRegistered">
      <mat-list dense>
        <mat-list-item *ngFor="let payment of payments">
          <span matLine>{{('PAYMENT.' + PaymentType[payment.type]) | translate}} {{payment.amount}}</span>
          <button mat-icon-button (click)="delPayment(payment)">
            <mat-icon>highlight_off</mat-icon>
          </button>
        </mat-list-item>
      </mat-list>
      <div fxLayout="row" fxLayoutGap="20px">
        <div class="payTotal">
          <h1>{{'PAYMENT.TOTAL' | translate }}: {{total | posCurrency:paymentService.currency}}</h1>
          <h1 [ngClass]="{'negative': change < 0}">{{'PAYMENT.CHANGE' | translate }}: {{change | posCurrency:paymentService.currency}}</h1>
        </div>
        <div class="createDocument">
          <button *ngIf="balance" type="submit" class="btn btn-success" mat-raised-button color="primary" (click)="createDocument()">Finalizar</button>
          <button mat-button (click)="printPreliminary()" *ngIf="allowPrintPreliminary">
            <mat-icon class="posIcon-36">print</mat-icon>
          </button>
        </div>
      </div>
    </div>
  </div>
